<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>amoCRM test</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div id="cards-list"></div>
    <script>
      function getRequest() {
        fetch("https://irishkanikitina2002.amocrm.ru/api/v4/leads", {
          method: "GET",
          headers: {
            "Content-Type": "application/json;charset=utf-8",
            Authorization:
              "Bearer " +
              "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjIzY2Q0Mzk1MmE5ZTUyNzMyYzQ5MmY2M2ZkYjgyZTgzNmNiYzY0YTYzYTJhZTAzNWE5YTZiOTZjNzI0Y2M2Mjk3MzNkNzA2MzExNjdmMzYxIn0.eyJhdWQiOiJkZjA3ZTEwZS1jODhhLTQ5YzItYjVhNi0zZDg4ZDFlOGNjZjgiLCJqdGkiOiIyM2NkNDM5NTJhOWU1MjczMmM0OTJmNjNmZGI4MmU4MzZjYmM2NGE2M2EyYWUwMzVhOWE2Yjk2YzcyNGNjNjI5NzMzZDcwNjMxMTY3ZjM2MSIsImlhdCI6MTcyNzc5NDc4NywibmJmIjoxNzI3Nzk0Nzg3LCJleHAiOjE3Mjc4ODExODcsInN1YiI6IjExNTgxMTE4IiwiZ3JhbnRfdHlwZSI6IiIsImFjY291bnRfaWQiOjMxOTc4ODcwLCJiYXNlX2RvbWFpbiI6ImFtb2NybS5ydSIsInZlcnNpb24iOjIsInNjb3BlcyI6WyJwdXNoX25vdGlmaWNhdGlvbnMiLCJmaWxlcyIsImNybSIsImZpbGVzX2RlbGV0ZSIsIm5vdGlmaWNhdGlvbnMiXSwiaGFzaF91dWlkIjoiZTYzNTM5N2UtZWFmYS00NGMxLTk4ZDEtNTE4NzRhMzhkYTFmIiwiYXBpX2RvbWFpbiI6ImFwaS1iLmFtb2NybS5ydSJ9.qOLEeZs4L_Q_GMVodbl1zUx4vz0t8njMzDr6N7hN1an3c9nhzHnzkwdYIFpgKuSMYMCCk3xcfH8s-9G1UhJEyc-qb3CjHjOitF0bT5WM7AcXJnSS3-D9kjxlSy_fptJIiKZTNeFE2unK-506sHBt0BaCTpwS0_1yomasMVVx5yCVVvZRqomNKYcQlofxvWjjTtpO1_guUyGZ3Yth8xpoPUUHsEb1UShnngqCiYa-ICyIw8e5_zPY4nkDDZA8_ucPw76RlshzwtT67ziDdklsf18u_BIHVML4dAJ24RWDQC034-ZGDTXr6bKaQ6pmuwKAMLYxHxCLhhyWaYMBa2Klew",
          },
        })
          .then((response) => response.json())
          .then((result) => {
            let table = '<table class="table">';
            result._embedded.leads.forEach((card, index) => {
              table += `
              <tr><tbody><td>
                <div class="card" style="width: 18rem;">
                  <div class="card-body" id="${card.id}"" onclick="handleCardClick(this.id)">
                    <h5 class="card-title" id="name">${card.name}</h5>
                    <p class="card-text" id="id">${card.id}</p>
                    <p class="card-text" id="price">${card.price}</p>
                  </div>
                </div>
              </td></tr></tbody>`;
            });
            table += "</table>";
            document.getElementById("cards-list").innerHTML = table;
          })
          .catch((e) => {
            console.log(e);
            throw e;
          });
      }
      getRequest();
    </script>
    <script>
      function handleCardClick(el) {
       fetch(`https://irishkanikitina2002.amocrm.ru/api/v4/leads/${el}`, {
          method: "GET",
          headers: {
            "Content-Type": "application/json;charset=utf-8",
            Authorization:
              "Bearer " +
              "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjIzY2Q0Mzk1MmE5ZTUyNzMyYzQ5MmY2M2ZkYjgyZTgzNmNiYzY0YTYzYTJhZTAzNWE5YTZiOTZjNzI0Y2M2Mjk3MzNkNzA2MzExNjdmMzYxIn0.eyJhdWQiOiJkZjA3ZTEwZS1jODhhLTQ5YzItYjVhNi0zZDg4ZDFlOGNjZjgiLCJqdGkiOiIyM2NkNDM5NTJhOWU1MjczMmM0OTJmNjNmZGI4MmU4MzZjYmM2NGE2M2EyYWUwMzVhOWE2Yjk2YzcyNGNjNjI5NzMzZDcwNjMxMTY3ZjM2MSIsImlhdCI6MTcyNzc5NDc4NywibmJmIjoxNzI3Nzk0Nzg3LCJleHAiOjE3Mjc4ODExODcsInN1YiI6IjExNTgxMTE4IiwiZ3JhbnRfdHlwZSI6IiIsImFjY291bnRfaWQiOjMxOTc4ODcwLCJiYXNlX2RvbWFpbiI6ImFtb2NybS5ydSIsInZlcnNpb24iOjIsInNjb3BlcyI6WyJwdXNoX25vdGlmaWNhdGlvbnMiLCJmaWxlcyIsImNybSIsImZpbGVzX2RlbGV0ZSIsIm5vdGlmaWNhdGlvbnMiXSwiaGFzaF91dWlkIjoiZTYzNTM5N2UtZWFmYS00NGMxLTk4ZDEtNTE4NzRhMzhkYTFmIiwiYXBpX2RvbWFpbiI6ImFwaS1iLmFtb2NybS5ydSJ9.qOLEeZs4L_Q_GMVodbl1zUx4vz0t8njMzDr6N7hN1an3c9nhzHnzkwdYIFpgKuSMYMCCk3xcfH8s-9G1UhJEyc-qb3CjHjOitF0bT5WM7AcXJnSS3-D9kjxlSy_fptJIiKZTNeFE2unK-506sHBt0BaCTpwS0_1yomasMVVx5yCVVvZRqomNKYcQlofxvWjjTtpO1_guUyGZ3Yth8xpoPUUHsEb1UShnngqCiYa-ICyIw8e5_zPY4nkDDZA8_ucPw76RlshzwtT67ziDdklsf18u_BIHVML4dAJ24RWDQC034-ZGDTXr6bKaQ6pmuwKAMLYxHxCLhhyWaYMBa2Klew",
          },
        })
          .then((response) => response.json())
          .then((result) => {
            console.log(result)
          })
          .catch((e) => {
            console.log(e);
            throw e;
          });
        console.log(el);
      }
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
